flows:
  cheapest_flight:
    description: Returns a list of flights from a noted departure location
    name: cheapest flights
    steps:
      - action: utter_cheapest_flight
      - collect: departure
        description: Departure location
        next:
          - if: slots.destination == null
            then: get_flights_without_destination
          - else: get_flights_with_destination
      - id: get_flights_without_destination
        action: action_get_cheapest_flights
        next: check_more_flights
      - id: get_flights_with_destination  
        collect: destination
        description: Destination location
        next: get_flights
      - id: get_flights
        action: action_get_cheapest_flights
        next: 
          - if: "slots.success = 'success'"
            then: check_more_flights
            next: END
          - else: END
      - id: check_more_flights
        collect: pick_destination
        next:
          - if: slots.pick_destination = "see_more"
            then: show_more_flights
          - else: END
      - id: show_more_flights
        action: action_get_more_cheapest_flights
