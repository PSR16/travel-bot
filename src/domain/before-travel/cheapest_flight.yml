version: "3.1"

actions:
  - action_get_cheapest_flights
  - action_get_more_cheapest_flights

slots: 
  departure:
    type: text
    mappings:
      - type: from_llm
  destination:
    type: text
    mappings:
      - type: from_llm
  departureDate:
    type: text
    mappings:
      - type: from_llm
  oneWay:
    type: bool
    mappings:
      - type: from_llm
  duration: #Exact duration or range of durations of the travel, in days.
    type: text
    mappings:
      - type: from_llm
  nonStop:
    type: bool
    mappings:
      - type: from_llm
  maxPrice:
    type: text
    mappings:
      - type: from_llm
  tripSeason:
    type: text
    mappings:
      - type: from_llm
  
  success:
    type: text
    mappings:
      - type: from_llm
      
  flight_suggestions:
    type: list
    initial_value: []
    mappings:
      - type: custom
        action: action_get_cheapest_flights

  # index:
  #   type: text
  #   initial_value: 3
  #   mappings:
  #     - type: custom
  #       action: action_get_more_cheapest_flights


  pick_destination:
    type: categorical
    values:
      - 1
      - 2
      - 3
      - see_more

responses:
  utter_cheapest_flight:
    - text: It sounds like you want to find the cheapest flight. Let me help you with that!
      metadata:
        rephrase: True
  utter_ask_departure:
    - text: Where are you leaving from?
      metadata:
        rephrase: True
        
  utter_ask_destination:
    - text: Where are you going to?
      metadata:
        rephrase: True

  utter_ask_pick_destination:
    - text: Which trip are you interested in?
      buttons:
        - title: Flight 1
          payload: /SetSlots(pick_destination=1)
        - title: Flight 2
          payload: /SetSlots(pick_destination=2)
        - title: Flight 3
          payload: /SetSlots(pick_destination=3)
        - title: See more
          payload: /SetSlots(pick_destination=see_more)
